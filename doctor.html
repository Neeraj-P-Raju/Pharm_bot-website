<!DOCTYPE html>
<html>
<head>
<title>Doctor Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
background: linear-gradient(to right,#e3f2fd,#f1f8ff);
font-family: Arial;
}

.header{
background:#0d6efd;
color:white;
padding:20px;
font-size:24px;
font-weight:bold;
text-align:center;
}

.card{
border-radius:15px;
box-shadow:0 4px 20px rgba(0,0,0,0.1);
}

.table thead{
background:#0d6efd;
color:white;
}
</style>
</head>

<body>

<div class="header">
Doctor Dashboard â€” PHARM BOT Orders
</div>

<div class="container mt-4">
<div class="card p-4">

<h4 class="text-primary mb-3">Patient Orders</h4>

<table class="table table-bordered table-hover text-center">
<thead>
<tr>
<th>Patient</th>
<th>Medicine</th>
<th>Floor</th>
<th>Room</th>
<th>Delivery</th>
<th>Status</th>
</tr>
</thead>
<tbody id="orderTable"></tbody>
</table>

</div>
</div>

<script>

let orders = JSON.parse(localStorage.getItem("orders")) || [];
let table = document.getElementById("orderTable");

if(orders.length === 0){
table.innerHTML = `<tr><td colspan="6">No Orders Available</td></tr>`;
}
else{
orders.forEach((order,index)=>{

// Fix old orders with no status
if(!order.status){
order.status="Pending";
}

table.innerHTML += `
<tr>
<td>${order.name}</td>

<td>
<input value="${order.med}" 
class="form-control form-control-sm"
onchange="editMed(${index},this.value)">
</td>

<td>${order.floor}</td>
<td>${order.room}</td>
<td>${order.delivery}</td>

<td>
${order.status=="Pending"
? `<button class="btn btn-success btn-sm" onclick="approve(${index})">Approve</button>`
: `<span class="badge bg-success">${order.status}</span>`
}
</td>

</tr>
`;
});
}

function editMed(index,value){
orders[index].med=value;
localStorage.setItem("orders",JSON.stringify(orders));
}

function approve(index){
orders[index].status="Approved";
localStorage.setItem("orders",JSON.stringify(orders));
location.reload();
}

</script>

</body>
</html>